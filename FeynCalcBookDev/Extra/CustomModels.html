<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>FeynCalc manual (development version)</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../css/feyncalc.css" />

</head>
<body>
<header id="title-block-header">
<h1 class="title">FeynCalc manual (development version)</h1>
</header>
<h2 id="custom-feynrules-models">Custom FeynRules models</h2>
<h3 id="see-also">See also</h3>
<p><a href="FeynCalc.html">Overview</a>.</p>
<p>Mathematica package <a
href="https://feynrules.irmp.ucl.ac.be/">FeynRules</a> allows you to
create new FeynArts models that can be used for calculations using
FeynCalc. FeynRules is not a part of FeynCalc and must thus be
downloaded and installed separately. You can obtain your copy from the
<a href="https://feynrules.irmp.ucl.ac.be/">developer website</a>.</p>
<p>FeynCalc contains some examples of custom FeynRules models that are
located inside</p>
<pre><code>FileNameJoin[{$UserBaseDirectory, &quot;Applications&quot;, &quot;FeynCalc&quot;, &quot;Examples&quot;, &quot;FeynRules&quot;}]</code></pre>
<p>The <code>XYZ.fr</code>-file is a FeynRules model, while the
<code>GenerateModelXYZ.m</code> script creates a FeynArts model out of
it. The script expects FeynRules to be located in</p>
<pre><code>   FileNameJoin[{$UserBaseDirectory,&quot;Applications&quot;,&quot;FeynRules&quot;}]</code></pre>
<p>This means that you should be able to load FeynRules on a fresh
Mathematica kernel using</p>
<pre><code>$FeynRulesPath=FileNameJoin[{$UserBaseDirectory,&quot;Applications&quot;,&quot;FeynRules&quot;}];
&lt;&lt;FeynRules`;</code></pre>
<p>without any error messages. If this does not work, then FeynRules
have not been installed properly on your computer and cannot be
used.</p>
<p>The script <code>GenerateModelXYZ.m</code> must be evaluated on a
fresh Mathematica kernel. You must ensure that no other packages are
loaded, otherwise the process will most likely fail. For that you can
either evaluate <code>Quit[]</code> before running the commands from the
script or manually kill the kernel(s) via
<code>Evaluation -&gt; Quit Kernel -&gt; ...</code>. After the script
has successfully finished you must close the kernel again. Do not try to
load FeynCalc on the same kernel, or you will run into more issues.</p>
<p>The new FeynArts model should be now located inside</p>
<pre><code>FileNameJoin[{$UserBaseDirectory,&quot;Applications&quot;,&quot;FeynCalc&quot;,&quot;FeynArts&quot;,&quot;Models&quot;}]</code></pre>
<p>Before it can be used for calculations, it must be patched for
compatibility with FeynCalc. The patching is done by using the function
<code>FAPatch</code> with the option <code>PatchModelsOnly</code> set to
<code>True</code></p>
<ul>
<li>If the model is located inside the <code>Models</code> directory of
<code>$FeynArtsDirectory</code>, it is sufficient to evaluate
<code>FAPatch[PatchModelsOnly -&gt; True]</code> after loading FeynCalc
and FeynArts in the usual way.</li>
<li>If the model has been placed into a separate directory, use
<code>FAPatch[PatchModelsOnly -&gt; True, FAModelsDirectory -&gt; "fullPathToMyModelDir"]</code></li>
</ul>
<p>The patching has to be done only once for each new model. However,
rerunning <code>FAPatch[PatchModelsOnly -&gt; True]</code> would not do
any harm, so if you often modify existing or add new models, you might
want to keep this command in your working notebooks.</p>
<p><strong>Please note that we donâ€™t provide support on how to create or
debug a particular FeynRules model. For that please consult the package
manual or contact the package developers </strong></p>
</body>
</html>
